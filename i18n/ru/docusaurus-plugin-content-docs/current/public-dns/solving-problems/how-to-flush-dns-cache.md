---
title: Как сбросить DNS-кеш
sidebar_position: 1
---

:::info

Рассказываем, как очистить DNS-кеш, чтобы решить проблемы с публичным DNS. Вы можете использовать Блокировщик рекламы AdGuard для настройки DNS-серверов, в том числе зашифрованных

Быстрая ссылка: [Скачать Блокировщик рекламы AdGuard](https://agrd.io/download-kb-adblock)

:::

## Что такое DNS-кеш?

DNS-кеш хранит IP-адреса посещённых сайтов на локальном компьютере, чтобы в следующий раз они загружались быстрее. Вместо того, чтобы выполнять длительный DNS-поиск, система отвечает на запросы с помощью записей DNS из временного DNS-кеша.

DNS-кеш содержит так называемые [записи о ресурсах](https://en.wikipedia.org/wiki/Domain_Name_System#Resource_records), которые включают:

- **Данные ресурса (или rdata)**;
- **Тип записи**;
- **Имя записи**;
- **TTL (время жизни информации)**;
- **Класс**;
- **Длину данных ресурса**.

## Когда нужно сбросить кеш

**You’ve changed your DNS provider to AdGuard DNS.** If the user has changed their DNS, it may take some time to see the result because of the cache.

**Вы регулярно видите ошибку 404.** Например, сайт перенесли на другой сервер, и его IP-адрес изменился. Чтобы браузер открывал сайт с нового IP-адреса, необходимо удалить закешированный IP из DNS-кеша.

**Вы хотите повысить уровень конфиденциальности.**

## Как сбросить DNS-кеш на разных ОС

### iOS

Есть разные способы очистить DNS-кеш на iPhone и iPad.

Самый простой — включить Авиарежим (например, в Центре управления или в Настройках) и выключить его. DNS-кеш будет сброшен.

Другой способ — сбросить сетевые настройки устройства в приложении Настройки. Откройте *Основные*, пролистайте вниз, найдите *Сброс* и нажмите *Сбросить настройки сети*.

:::note

Делая так, вы потеряете подключение к роутерам Wi-Fi и другие сетевые настройки, включая настройки DNS-серверов. Их нужно будет сбросить вручную.

:::

### Android

Есть разные способы очистить DNS-кеш на Android. The exact steps may vary depending on the version of Android you’re using and the device manufacturer.

#### Очистить DNS-кеш через Chrome

Google Chrome, который часто является браузером по умолчанию на Android, имеет свой собственный DNS-кеш. Чтобы очистить этот кеш в браузере Chrome, следуйте инструкции ниже:

1. Запустите Chrome на своём Android-устройстве
1. Введите `chrome://net-internals/#DNS` в адресной строке
1. На странице DNS-поиска выберите DNS в меню слева
1. На панели справа нажмите кнопку *Clear Host Cache*, чтобы очистить DNS-кеш на вашем устройстве

#### Измените сеть Wi-Fi на статическую

To clear your Android device’s DNS cache by changing Wi-Fi network settings to Static, follow these steps:

1. Go to *Settings → Wi-Fi* and choose the network you’re connected to
1. Найдите настройки IP и выберите *Статический*
1. Заполните необходимые поля. You can get the necessary information from your network administrator or from your router’s configuration page
1. После ввода информации снова подключитесь к сети Wi-Fi. Это действие заставит ваше устройство обновить настройки IP и DNS и очистить DNS-кеш

#### Сбросить настройки сети

Другой способ — сбросить сетевые настройки устройства в приложении Настройки. Откройте *Настройки → Системные → Расширенные → Сброс → Сброс параметров сети* и нажмите *Сбросить настройки*.

:::note

Делая так, вы потеряете подключение к роутерам Wi-Fi и другие сетевые настройки, включая настройки DNS-серверов. Их нужно будет сбросить вручную.

:::

### macOS

Чтобы очистить DNS-кеш на macOS, откройте Терминал (его можно найти, используя поиск Spotlight — чтобы сделать это, нажмите Command и пробел и наберите *Терминал*) и введите следующую команду:

`sudo killall -HUP mDNSResponder`

На macOS Big Sur 11.2.0 и macOS Monterey 12.0.0 также можно использовать эту команду:

`sudo dscacheutil -flushcache`

После введите пароль администратора, чтобы завершить процесс.

### Windows

Чтобы сбросить DNS-кеш на устройстве Windows, сделайте следующее:

Откройте командную строку от имени администратора. Её можно найти в меню «Пуск», введя *командная строка* или *cmd*. Затем введите `ipconfig /flushdns` и нажмите Enter.

Вы увидите строку *Кеш DNS-резолвера успешно сброшен*. Готово!

### Linux

В Linux нет DNS-кеширования на уровне ОС, если только не установлена и не запущена служба кеширования, такая как systemd-resolved, DNSMasq, BIND или nscd. Сброс DNS-кеша зависит от дистрибутива Linux и используемой службы кеша.

Для каждого дистрибутива нужно запустить окно терминала. Нажмите Ctrl+Alt+T и используйте соответствующую команду, чтобы очистить DNS-кеш для сервиса, с которым работает ваша система Linux.

To find out which DNS resolver you’re using, command `sudo lsof -i :53 -S`.

#### systemd-resolved

Чтобы очистить DNS-кеш **systemd-resolved**, введите:

`sudo systemd-resolve --flush-caches`

В случае успеха команда не возвращает никакого сообщения.

#### DNSMasq

Чтобы очистить кеш **DNSMasq**, вам нужно перезапустить его:

`sudo service dnsmasq restart`

#### NSCD

Чтобы очистить кеш **NSCD**, вам также нужно перезапустить сервис:

`sudo service nscd restart`

#### BIND

Чтобы сбросить DNS-кеш **BIND**, выполните команду:

`rndc flush`

Затем вам нужно перезагрузить BIND:

`rndc reload`

Вы получите сообщение, что сервер успешно перезагружен.

## Как сбросить DNS-кеш в Chrome

Это может быть полезно, если вы не хотите каждый раз перезапускать браузер при работе с приватным AdGuard DNS или AdGuard Home. Настройки 1–2 необходимо изменить только один раз.

1. Отключите **безопасный DNS** в настройках Chrome

    ```bash
    chrome://settings/security
    ```

1. Отключите **Async DNS resolver**

    ```bash
    chrome://flags/#enable-async-dns
    ```

1. Нажмите обе кнопки здесь

    ```bash
    chrome://net-internals/#sockets
    ```

1. Нажмите **Очистить кеш хоста**

    ```bash
    chrome://net-internals/#dns
    ```
