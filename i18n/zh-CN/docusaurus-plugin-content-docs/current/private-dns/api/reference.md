---
title: 参考资料
sidebar_position: 2
toc_min_heading_level: 3
toc_max_heading_level: 4
---

<!--
    The content below is simply an automatic conversion from the OpenAPI spec https://api.adguard-dns.io/static/swagger/openapi.json to markdown using https://swagger-markdown-ui.netlify.app/.

    If you want to change it, ask the developers to change the OpenAPI spec.
-->

本文章包含 [AdGuard DNS API](private-dns/api/overview.md) 的文档。 有关完成的 AdGuard DNS API 更新日志记录，请访问[此页面](private-dns/api/changelog.md)。

## 当前版本：1.9

### /oapi/v1/account/limits

#### GET

##### 摘要

获取账号限额

##### 响应

| 响应代码 | 详细信息   |
| ---- | ------ |
| 200  | 账号限额信息 |

### /oapi/v1/dedicated_addresses/ipv4

#### GET

##### 摘要

列出专用 IPv4 地址

##### 响应

| 响应代码 | 详细信息         |
| ---- | ------------ |
| 200  | 专用 IPv4 地址列表 |

#### POST

##### 摘要

分配新的 IPv4 地址

##### 响应

| 响应代码 | 详细信息           |
| ---- | -------------- |
| 200  | 成功分配的新 IPv4 地址 |
| 429  | 专用 IPv4 数量达到上限 |

### /oapi/v1/devices

#### GET

##### 摘要

列出设备

##### 响应

| 响应代码 | 详细信息 |
| ---- | ---- |
| 200  | 设备列表 |

#### POST

##### 摘要

创建新设备

##### 响应

| 响应代码 | 详细信息     |
| ---- | -------- |
| 200  | 设备已创建    |
| 400  | 验证失败     |
| 429  | 设备数量达到限制 |

### /oapi/v1/devices/{device_id}

#### DELETE

##### 摘要

删除设备

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息  |
| ---- | ----- |
| 200  | 设备已删除 |
| 404  | 未找到设备 |

#### GET

##### 摘要

根据 ID 获取现有设备

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息  |
| ---- | ----- |
| 200  | 设备信息  |
| 404  | 未找到设备 |

#### PUT

##### 摘要

更新现有设备

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息  |
| ---- | ----- |
| 200  | 设备已更新 |
| 400  | 验证失败  |
| 404  | 未找到设备 |

### /oapi/v1/devices/{device_id}/dedicated_addresses

#### GET

##### 摘要

列出设备的专用 IPv4 和 IPv6 地址

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息           |
| ---- | -------------- |
| 200  | 专用 IPv4 和 IPv6 |

### /oapi/v1/devices/{device_id}/dedicated_addresses/ipv4

#### DELETE

##### 摘要

解除设备上专用 IPv4 链接

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息              |
| ---- | ----------------- |
| 200  | 专用 IPv4 成功与设备解除连接 |
| 404  | 设备或地址未找到          |

#### POST

##### 摘要

将专用 IPv4 连接到设备

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息              |
| ---- | ----------------- |
| 200  | 专用 IPv4 成功连接到设备   |
| 400  | 验证失败              |
| 404  | 设备或地址未找到          |
| 429  | 连接的专用 IPv4 数量达到上限 |

### /oapi/v1/devices/{device_id}/doh.mobileconfig

#### GET

##### 摘要

获取 DNS-over-HTTPS .mobileconfig 文件。

##### 参数

| 名称                      | 位置 | 详细信息                                 | 必填 | 类型         |
| ----------------------- | -- | ------------------------------------ | -- | ---------- |
| device_id               | 路径 |                                      | 是  | 字符串        |
| exclude_wifi_networks | 查询 | 按 SSID 列出想要禁用 AdGuard DNS 的 Wi-Fi 网络 | 否  | [ string ] |
| exclude_domain          | 查询 | 列出将使用默认 DNS 服务器而不是 AdGuard DNS 的域名   | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息                     |
| ---- | ------------------------ |
| 200  | DNS-over-HTTPS .plist 文件 |
| 404  | 未找到设备                    |

### /oapi/v1/devices/{device_id}/doh_password/reset

#### PUT

##### 摘要

生成并设置新的 DNS-over-HTTPS 密码。

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息                  |
| ---- | --------------------- |
| 200  | DNS-over-HTTPS 密码成功重置 |
| 404  | 未找到设备                 |

### /oapi/v1/devices/{device_id}/dot.mobileconfig

#### GET

##### 摘要

获取 DNS-over-TLS .mobileconfig 文件。

##### 参数

| 名称                      | 位置 | 详细信息                                 | 必填 | 类型         |
| ----------------------- | -- | ------------------------------------ | -- | ---------- |
| device_id               | 路径 |                                      | 是  | 字符串        |
| exclude_wifi_networks | 查询 | 按 SSID 列出想要禁用 AdGuard DNS 的 Wi-Fi 网络 | 否  | [ string ] |
| exclude_domain          | 查询 | 列出将使用默认 DNS 服务器而不是 AdGuard DNS 的域名   | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息                     |
| ---- | ------------------------ |
| 200  | DNS-over-HTTPS .plist 文件 |
| 404  | 未找到设备                    |

### /oapi/v1/devices/{device_id}/settings

#### PUT

##### 摘要

更新设备设置

##### 参数

| 名称        | 位置 | 详细信息 | 必填 | 类型  |
| --------- | -- | ---- | -- | --- |
| device_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息    |
| ---- | ------- |
| 200  | 设备设置已更新 |
| 400  | 验证失败    |
| 404  | 未找到设备   |

### /oapi/v1/dns_servers

#### GET

##### 摘要

列出属于用户的 DNS 服务器。

##### 详细信息

列出属于用户的 DNS 服务器。 默认情况下，至少有一个默认服务器。

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | DNS 服务器列表 |

#### POST

##### 摘要

创建新的 DNS 服务器

##### 详细信息

创建新的 DNS 服务器。 用户可以附加自定义设置，否则将使用默认设置创建 DNS 服务器。

##### 响应

| 响应代码 | 详细信息          |
| ---- | ------------- |
| 200  | DNS 服务器已创建    |
| 400  | 验证失败          |
| 429  | DNS 服务器数量已达上限 |

### /oapi/v1/dns_servers/{dns_server_id}

#### DELETE

##### 摘要

删除 DNS 服务器

##### 详细信息

删除 DNS 服务器。 所有连接到此 DNS 服务器的设备都将移至默认 DNS 服务器。 禁止删除默认 DNS 服务器。

##### 参数

| 名称              | 位置 | 详细信息 | 必填 | 类型  |
| --------------- | -- | ---- | -- | --- |
| dns_server_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息        |
| ---- | ----------- |
| 200  | DNS 服务器已删除  |
| 404  | 未找到 DNS 服务器 |

#### GET

##### 摘要

根据 ID 获取现有 DNS 服务器

##### 参数

| 名称              | 位置 | 详细信息 | 必填 | 类型  |
| --------------- | -- | ---- | -- | --- |
| dns_server_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息        |
| ---- | ----------- |
| 200  | DNS 服务器信息   |
| 404  | 未找到 DNS 服务器 |

#### PUT

##### 摘要

更新现有 DNS 服务器。

##### 参数

| 名称              | 位置 | 详细信息 | 必填 | 类型  |
| --------------- | -- | ---- | -- | --- |
| dns_server_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息        |
| ---- | ----------- |
| 200  | DNS 服务器已更新  |
| 400  | 验证失败        |
| 404  | 未找到 DNS 服务器 |

### /oapi/v1/dns_servers/{dns_server_id}/settings

#### PUT

##### 摘要

更新 DNS 服务器设置

##### 参数

| 名称              | 位置 | 详细信息 | 必填 | 类型  |
| --------------- | -- | ---- | -- | --- |
| dns_server_id | 路径 |      | 是  | 字符串 |

##### 响应

| 响应代码 | 详细信息         |
| ---- | ------------ |
| 200  | DNS 服务器设置已更新 |
| 400  | 验证失败         |
| 404  | 未找到 DNS 服务器  |

### /oapi/v1/filter_lists

#### GET

##### 摘要

获取过滤器列表

##### 响应

| 响应代码 | 详细信息  |
| ---- | ----- |
| 200  | 过滤器列表 |

### /oapi/v1/oauth_token

#### POST

##### 摘要

生成访问和刷新令牌

##### 响应

| 响应代码 | 详细信息                |
| ---- | ------------------- |
| 200  | 已颁发访问令牌             |
| 400  | 缺少必需参数              |
| 401  | 提供的凭证、MFA 令牌或刷新令牌无效 |

null

### /oapi/v1/query_log

#### DELETE

##### 摘要

清除查询日志

##### 响应

| 响应代码 | 详细信息    |
| ---- | ------- |
| 202  | 查询日志已清除 |

#### GET

##### 摘要

获取查询日志

##### 参数

| 名称                 | 位置 | 详细信息                   | 必填 | 类型                                                  |
| ------------------ | -- | ---------------------- | -- | --------------------------------------------------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间       | 是  | long                                                |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间       | 是  | long                                                |
| devices            | 查询 | 按设备筛选                  | 否  | [ string ]                                          |
| countries          | 查询 | 按国家/地区筛选               | 否  | [ string ]                                          |
| companies          | 查询 | 按公司筛选                  | 否  | [ string ]                                          |
| statuses           | 查询 | 按状态筛选                  | 否  | [ [FilteringActionStatus](#FilteringActionStatus) ] |
| categories         | 查询 | 按类别筛选                  | 否  | [ [CategoryType](#CategoryType) ]                   |
| search             | 查询 | 按域名筛选                  | 否  | 字符串                                                 |
| limit              | 查询 | 限制返回的记录数               | 否  | integer                                             |
| cursor             | 查询 | 分页光标。 使用响应中的光标对页面进行分页。 | 否  | string                                              |

##### 响应

| 响应代码 | 详细信息 |
| ---- | ---- |
| 200  | 查询日志 |

### /oapi/v1/revoke_token

#### POST

##### 摘要

撤销刷新令牌

##### 参数

| 名称            | 位置 | 详细信息 | 必填 | 类型     |
| ------------- | -- | ---- | -- | ------ |
| refresh_token | 查询 | 刷新令牌 | 是  | string |

##### 响应

| 响应代码 | 详细信息    |
| ---- | ------- |
| 200  | 刷新令牌已撤销 |

null

### /oapi/v1/stats/categories

#### GET

##### 摘要

获取类别统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | 类别统计信息已获取 |
| 400  | 验证失败      |

### /oapi/v1/stats/companies

#### GET

##### 摘要

获取公司统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | 公司统计信息已获取 |
| 400  | 验证失败      |

### /oapi/v1/stats/companies/detailed

#### GET

##### 摘要

获取详细的公司统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |
| cursor             | 查询 | 分页光标             | 否  | string     |

##### 响应

| 响应代码 | 详细信息         |
| ---- | ------------ |
| 200  | 详细的公司统计信息已获取 |
| 400  | 验证失败         |

### /oapi/v1/stats/countries

#### GET

##### 摘要

获取国家/地区统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息         |
| ---- | ------------ |
| 200  | 国家/地区统计信息已获取 |
| 400  | 验证失败         |

### /oapi/v1/stats/devices

#### GET

##### 摘要

获取设备统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | 设备统计信息已获取 |
| 400  | 验证失败      |

### /oapi/v1/stats/domains

#### GET

##### 摘要

获取域名统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | 域名统计信息已获取 |
| 400  | 验证失败      |

### /oapi/v1/stats/time

#### GET

##### 摘要

获取时间统计信息

##### 参数

| 名称                 | 位置 | 详细信息             | 必填 | 类型         |
| ------------------ | -- | ---------------- | -- | ---------- |
| time_from_millis | 查询 | 以毫秒为单位（含毫秒）的起始时间 | 是  | long       |
| time_to_millis   | 查询 | 以毫秒为单位（含毫秒）的结束时间 | 是  | long       |
| devices            | 查询 | 按设备筛选            | 否  | [ string ] |
| countries          | 查询 | 按国家/地区筛选         | 否  | [ string ] |

##### 响应

| 响应代码 | 详细信息      |
| ---- | --------- |
| 200  | 时间统计信息已获取 |
| 400  | 验证失败      |

### /oapi/v1/web_services

#### GET

##### 摘要

列出网络服务

##### 响应

| 响应代码 | 详细信息   |
| ---- | ------ |
| 200  | 网络服务列表 |
